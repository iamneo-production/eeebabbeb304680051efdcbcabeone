<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>tic_tac_toe</title>

  <!-- link the style.css and app.js files -->

</head>
<body>
  <!-- Enter your code here -->
  <canvas id = "canvas" width="320" height="320"></canvas>
  <script>
    class Square{
      constructor(x, y, width, height, ctx){
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
        this.ctx = ctx;
        this.actor = null;
      }

      draw(){
        this.ctx.strokeStyle = 'black';
        this.ctx.strokeRect(this.x, this.y, this.width, this.height);

        if (this.actor){
          this.ctx.fillStyle = 'black';
          this.ctx.font = '30px Verdana';
          this.ctx.textAlign = "center";
          this.ctx.fillText(this.actor, this.x + this.width/2, this.y + this.height/2+10);
        }
      }
    }

    class TicTacToe{
      constructor(id){
        this.canvas = document.getElementById(id);
        this.ctx = this.canvas.getContext('2d');

        this.squares = [];

        const w = this.canvas.width/3;
        const h = this.canvas.height/3;

        for(let x = 0; x < 3; x++){
          for(let y = 0; y < 3; y++){
            this.squares.push(new Square(x*w, y*h, w, h, this.ctx));
          }
        }

        this.actors = ["x", "o"];

        this.turn = 0;

        this.gameOver = false;

        this.squares.forEach(squares => squares.draw());

        this.canvas.addEventListener('click', function(event){
          this.click(event);
        }.bind(this));
      }

      click(event){
        if(this.gameOver){
          this.reset();
          return;
        }

        const x = event.offsetX;
        const y = event.offsetY;

        for(let square of this.squares){
          if(square.actor != null) continue;

          if(x >= square.x && x <= square.x + square.width && y >= square.y && y <= square.y + square.height){
            square.actor = this.actors[this.turn];
            square.draw();

            this.turn = (this)
          }
        }
      }
    }
  </script>
</body>
</html>